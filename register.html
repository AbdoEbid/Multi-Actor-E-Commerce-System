<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp</title>

</head>

<body>
    <h1>Sign Up</h1>
    <div id="register-icon">ðŸ‘¤</div>

    <h2>Register</h2>
    <form onsubmit="Save(event)">
        <label for="name">Name</label>
        <input type="text" id="name" placeholder="Name"><br>
        <label for="email">Email</label>
        <input type="text" id="email" placeholder="Email"><br>
        <label for="pass">Password</label>
        <input type="password" id="password" placeholder="Password"><br>

        <select id="role">
            <option value="customer">Customer</option>
            <option value="seller">Seller</option>
        </select><br>
        <input type="submit" value="Register">
    </form>


    <script type="module">
        import StorageManager from './modules/base/StorageModule.js';
        import UserManager from './modules/base/UserModule.js';

        window.Save = function (event) {
            event.preventDefault();

            let name, email, password, role;
            name = document.getElementById('name').value.trim();
            email = document.getElementById('email').value.trim();
            password = document.getElementById("password").value;
            role = document.getElementById("role").value;

            //Add Static ADMIN in Local Storage in Section Users
            const users = StorageManager.LoadSection("users") || [];
            const adminExists = users.some(user => user.id === 0 && user.role === "admin");

            if (!adminExists) {
                const staticAdmin = {
                    id: 0,
                    name: "Admin User",
                    email: "admin@gmail.com",
                    password: "admin123",
                    role: "admin"
                };
                users.push(staticAdmin);
                StorageManager.SaveSection("users", users);
                console.log("Static admin added.");
            }

            // Add New Users with Incremental IDs
            const newId = UserManager.GenerateNextID();
            UserManager.CreateUser(newId, name, email, password, role);




        }




    </script>
</body>