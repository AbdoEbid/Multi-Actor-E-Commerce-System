<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <script type="module">
    import showSection from './modules/base/AdminModule.js';
    import StorageManager from './modules/base/StorageModule.js'
    function StoreJSON() {
      /*- NOTE: Use the below line at the top of your module/script */
      // import {StorageManager} from './modules/base/StorageModule.js'
      if (!localStorage.getItem("data")) {
        fetch('./data/data.json')
          .then(response => response.json())
          .then(data => {
            StorageManager.Save('data', data);
            console.log("JSON data loaded to localStorage for the first time.");
          })
          .catch(err => console.error("Failed to load JSON:", err));
      } else {
        console.log("Data already in localStorage. Skipping JSON fetch.");
      }
    }

    StoreJSON();
    window.addEventListener('load', () => {
      const users = document.getElementById("users");
      const products = document.getElementById("products");
      const orders = document.getElementById("orders");

      users.addEventListener('click', () => showSection("users"));
      // var targetBtn = document.getElementById("viewBtn");
      // targetBtn.addEventListener('click', )
      products.addEventListener('click', () => showSection("products"));
      orders.addEventListener('click', () => showSection("orders"));
    });


  </script>


</head>

<body>

  <!-- Navbar -->
  <nav class="navbar navbar-dark bg-dark px-4">
    <span class="navbar-brand">Admin Dashboard</span>
    <button class="btn btn-outline-light">Logout</button>
  </nav>

  <!-- Layout -->
  <div class="container-fluid mt-4">
    <div class="row">

      <!-- Sidebar -->
      <div class="col-md-3">
        <div class="list-group">
          <button id="users" class="list-group-item list-group-item-action active">Manage Users</button>
          <button id="products" class="list-group-item list-group-item-action">Manage Products</button>
          <button id="orders" class="list-group-item list-group-item-action">Manage Orders</button>
        </div>
      </div>
      <!-- Main Content -->
      <div class="col-md-9">
        <div id="adminContent" class="p-3 border bg-white rounded shadow-sm">
          <!-- Content will be injected here -->
          <h4>Welcome Admin! Choose a section from the left.</h4>
        </div>
      </div>
    </div>
  </div>

</body>

</html>